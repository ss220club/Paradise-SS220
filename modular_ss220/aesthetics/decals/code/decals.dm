/datum/element/decal/generate_appearance(_icon, _icon_state, _dir, _layer, _color, _alpha, source)
	. = ..()
	if(!.)
		return
	var/atom/master = source
	if(master::color && _color)
		pic.appearance_flags |= RESET_COLOR

#define WOODEN_DECAL_HELPER(path)\
##path/end {\
	icon_state = "siding_wood_end";\
}\
##path/corner {\
	icon_state = "siding_wood_corner";\
}\

/* Wood Siding */
/obj/effect/turf_decal/siding
	icon = 'modular_ss220/aesthetics/decals/icons/siding.dmi'
	icon_state = "siding_line"

/obj/effect/turf_decal/siding/wood
	icon_state = "siding_wood_line"
	color = "#864A2D"

WOODEN_DECAL_HELPER(/obj/effect/turf_decal/siding/wood)

/obj/effect/turf_decal/siding/wood/neutral
	color = null

WOODEN_DECAL_HELPER(/obj/effect/turf_decal/siding/wood/neutral)

/obj/effect/turf_decal/siding/wood/oak
	color = "#644526";

WOODEN_DECAL_HELPER(/obj/effect/turf_decal/siding/wood/oak)

/obj/effect/turf_decal/siding/wood/birch
	color = "#FFECB3";

WOODEN_DECAL_HELPER(/obj/effect/turf_decal/siding/wood/birch)

/obj/effect/turf_decal/siding/wood/cherry
	color = "#643412";

WOODEN_DECAL_HELPER(/obj/effect/turf_decal/siding/wood/cherry)

/obj/effect/turf_decal/siding/wood/amaranth
	color = "#6B2E3E";

WOODEN_DECAL_HELPER(/obj/effect/turf_decal/siding/wood/amaranth)

/obj/effect/turf_decal/siding/wood/ebonite
	color = "#363649";

WOODEN_DECAL_HELPER(/obj/effect/turf_decal/siding/wood/ebonite)

/obj/effect/turf_decal/siding/wood/pink_ivory
	color = "#D78575";

WOODEN_DECAL_HELPER(/obj/effect/turf_decal/siding/wood/pink_ivory)

/obj/effect/turf_decal/siding/wood/guaiacum
	color = "#5C6250";

WOODEN_DECAL_HELPER(/obj/effect/turf_decal/siding/wood/guaiacum)

/* SIDING */
/obj/effect/turf_decal/siding/white
	color = "#BCBCBC"

/obj/effect/turf_decal/siding/white/corner
	icon_state = "siding_corner"

/obj/effect/turf_decal/siding/white/end
	icon_state = "siding_end"

/obj/effect/turf_decal/siding/red
	color = "#DE3A3A"

/obj/effect/turf_decal/siding/red/corner
	icon_state = "siding_corner"

/obj/effect/turf_decal/siding/red/end
	icon_state = "siding_end"

/obj/effect/turf_decal/siding/dark_red
	color = "#B11111"

/obj/effect/turf_decal/siding/dark_red/corner
	icon_state = "siding_corner"

/obj/effect/turf_decal/siding/dark_red/end
	icon_state = "siding_end"

/obj/effect/turf_decal/siding/green
	color = "#9FED58"

/obj/effect/turf_decal/siding/green/corner
	icon_state = "siding_corner"

/obj/effect/turf_decal/siding/green/end
	icon_state = "siding_end"

/obj/effect/turf_decal/siding/blue
	color = "#52B4E9"

/obj/effect/turf_decal/siding/blue/corner
	icon_state = "siding_corner"

/obj/effect/turf_decal/siding/blue/end
	icon_state = "siding_end"

/obj/effect/turf_decal/siding/yellow
	color = "#EFB341"

/obj/effect/turf_decal/siding/yellow/corner
	icon_state = "siding_corner"

/obj/effect/turf_decal/siding/yellow/end
	icon_state = "siding_end"

/obj/effect/turf_decal/siding/purple
	color = "#D381C9"

/obj/effect/turf_decal/siding/purple/corner
	icon_state = "siding_corner"

/obj/effect/turf_decal/siding/purple/end
	icon_state = "siding_end"

/obj/effect/turf_decal/siding/brown
	color = "#A46106"

/obj/effect/turf_decal/siding/brown/corner
	icon_state = "siding_corner"

/obj/effect/turf_decal/siding/brown/end
	icon_state = "siding_end"

/obj/effect/turf_decal/siding/thinplating
	icon_state = "siding_thinplating_line"
	color = "#aaaaaa"

/obj/effect/turf_decal/siding/thinplating/corner
	icon_state = "siding_thinplating_corner"

/obj/effect/turf_decal/siding/thinplating/end
	icon_state = "siding_thinplating_end"

/obj/effect/turf_decal/siding/thinplating/light
	color = "#FFFFFF"

/obj/effect/turf_decal/siding/thinplating/light/corner
	icon_state = "siding_thinplating_corner"

/obj/effect/turf_decal/siding/thinplating/light/end
	icon_state = "siding_thinplating_end"

/obj/effect/turf_decal/siding/thinplating/dark
	icon_state = "siding_thinplating_line"
	color = "#474747"

/obj/effect/turf_decal/siding/thinplating/dark/corner
	icon_state = "siding_thinplating_corner"

/obj/effect/turf_decal/siding/thinplating/dark/end
	icon_state = "siding_thinplating_end"

/obj/effect/turf_decal/siding/wideplating
	icon_state = "siding_wideplating_line"
	color = "#aaaaaa"

/obj/effect/turf_decal/siding/wideplating/corner
	icon_state = "siding_wideplating_corner"

/obj/effect/turf_decal/siding/wideplating/end
	icon_state = "siding_wideplating_end"

/obj/effect/turf_decal/siding/wideplating/light
	color = "#FFFFFF"

/obj/effect/turf_decal/siding/wideplating/light/corner
	icon_state = "siding_wideplating_corner"

/obj/effect/turf_decal/siding/wideplating/light/end
	icon_state = "siding_wideplating_end"

/obj/effect/turf_decal/siding/wideplating/dark
	icon_state = "siding_wideplating_line"
	color = "#474747"

/obj/effect/turf_decal/siding/wideplating/dark/corner
	icon_state = "siding_wideplating_corner"

/obj/effect/turf_decal/siding/wideplating/dark/end
	icon_state = "siding_wideplating_end"

/obj/effect/turf_decal/siding/trimline
	icon_state = "trimline_fill"
	color = "#aaaaaa"
	alpha = 120

/obj/effect/turf_decal/siding/trimline/corner
	icon_state = "trimline_corner_fill"

/obj/effect/turf_decal/siding/trimline/end
	icon_state = "trimline_end_fill"

/obj/effect/turf_decal/siding/trimline/light
	color = "#FFFFFF"

/obj/effect/turf_decal/siding/trimline/light/corner
	icon_state = "trimline_corner_fill"

/obj/effect/turf_decal/siding/trimline/light/end
	icon_state = "trimline_end_fill"

/obj/effect/turf_decal/siding/trimline/dark
	color = "#474747"

/obj/effect/turf_decal/siding/trimline/dark/corner
	icon_state = "trimline_corner_fill"

/obj/effect/turf_decal/siding/trimline/dark/end
	icon_state = "trimline_end_fill"

/obj/effect/turf_decal/siding/trimline/green
	color = "#9FED58"

/obj/effect/turf_decal/siding/trimline/green/corner
	icon_state = "trimline_corner_fill"

/obj/effect/turf_decal/siding/trimline/green/end
	icon_state = "trimline_end_fill"

/obj/effect/turf_decal/siding/trimline/blue
	color = "#486091"

/obj/effect/turf_decal/siding/trimline/blue/corner
	icon_state = "trimline_corner_fill"

/obj/effect/turf_decal/siding/trimline/blue/end
	icon_state = "trimline_end_fill"

/obj/effect/turf_decal/siding/trimline/brown
	color = "#A46106"

/obj/effect/turf_decal/siding/trimline/brown/corner
	icon_state = "trimline_corner_fill"

/obj/effect/turf_decal/siding/trimline/brown/end
	icon_state = "trimline_end_fill"

/* TILE */
/obj/effect/turf_decal/tile
	icon = 'modular_ss220/aesthetics/decals/icons/tile.dmi'

/// Automatically generates all subtypes for a decal with the given path.
#define TILE_DECAL_SUBTYPE_HELPER(path)\
##path/opposingcorners {\
	icon_state = "tile_opposing_corners";\
}\
##path/half {\
	icon_state = "tile_half";\
}\
##path/half/contrasted {\
	icon_state = "tile_half_contrasted";\
}\
##path/anticorner {\
	icon_state = "tile_anticorner";\
}\
##path/anticorner/contrasted {\
	icon_state = "tile_anticorner_contrasted";\
}\
##path/fourcorners {\
	icon_state = "tile_fourcorners";\
}\
##path/full {\
	icon_state = "tile_full";\
}\
##path/diagonal_centre {\
	icon_state = "diagonal_centre";\
}\
##path/diagonal_edge {\
	icon_state = "diagonal_edge";\
}

TILE_DECAL_SUBTYPE_HELPER(/obj/effect/turf_decal/tile/blue)
TILE_DECAL_SUBTYPE_HELPER(/obj/effect/turf_decal/tile/green)
TILE_DECAL_SUBTYPE_HELPER(/obj/effect/turf_decal/tile/yellow)
TILE_DECAL_SUBTYPE_HELPER(/obj/effect/turf_decal/tile/red)
TILE_DECAL_SUBTYPE_HELPER(/obj/effect/turf_decal/tile/bar)
TILE_DECAL_SUBTYPE_HELPER(/obj/effect/turf_decal/tile/purple)
TILE_DECAL_SUBTYPE_HELPER(/obj/effect/turf_decal/tile/brown)
TILE_DECAL_SUBTYPE_HELPER(/obj/effect/turf_decal/tile/neutral)

/* GRASS */
/obj/effect/turf_decal/grass
	icon = 'modular_ss220/aesthetics/decals/icons/grass.dmi'
	icon_state = "grass_edge_big"
	base_icon_state = "grass_edge"

/* NUMBERS */
/obj/effect/turf_decal/miscellaneous/number
	icon = 'modular_ss220/aesthetics/decals/icons/number.dmi'
	icon_state = "number_0"

/obj/effect/turf_decal/miscellaneous/number/number_1
	icon_state = "number_1"

/obj/effect/turf_decal/miscellaneous/number/number_2
	icon_state = "number_2"

/obj/effect/turf_decal/miscellaneous/number/number_3
	icon_state = "number_3"

/obj/effect/turf_decal/miscellaneous/number/number_4
	icon_state = "number_4"

/obj/effect/turf_decal/miscellaneous/number/number_5
	icon_state = "number_5"

/obj/effect/turf_decal/miscellaneous/number/number_6
	icon_state = "number_6"

/obj/effect/turf_decal/miscellaneous/number/number_7
	icon_state = "number_7"

/obj/effect/turf_decal/miscellaneous/number/number_8
	icon_state = "number_8"

/obj/effect/turf_decal/miscellaneous/number/number_9
	icon_state = "number_9"

/* NT LOGO */
/obj/effect/decal/nanotrasen_logo
	name = "Nanotrasen Logo"
	icon = 'modular_ss220/aesthetics/decals/icons/NT_logo.dmi'

/obj/effect/decal/nanotrasen_logo/n1
	icon_state = "logo1"

/obj/effect/decal/nanotrasen_logo/n2
	icon_state = "logo2"

/obj/effect/decal/nanotrasen_logo/n3
	icon_state = "logo3"

/obj/effect/decal/nanotrasen_logo/n4
	icon_state = "logo4"

/obj/effect/decal/nanotrasen_logo/n5
	icon_state = "logo5"

/obj/effect/decal/nanotrasen_logo/n6
	icon_state = "logo6"

/* CLEANABLE */
/obj/effect/decal/cleanable/dust
	name = "dust"
	desc = "It's a little dusty. Someone should clean that up."
	gender = PLURAL
	density = FALSE
	layer = TURF_LAYER
	icon = 'modular_ss220/aesthetics/decals/icons/dirt.dmi'
	icon_state = "dust"
	base_icon_state = "dust"
	mouse_opacity = FALSE

/* Fake Lattice */
/obj/effect/decal/fakelattice
	name = "lattice"
	desc = "A lightweight support lattice."
	icon = 'icons/obj/smooth_structures/lattice.dmi'
	icon_state = "lattice-255"
	density = TRUE

#undef WOODEN_DECAL_HELPER
